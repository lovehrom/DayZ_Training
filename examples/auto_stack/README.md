# Auto Stack System Example

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è:** 15 –º–∏–Ω—É—Ç

---

## üìã –ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ç–µ–∫–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
- Player-specific cooldowns
- Type-aware –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
- –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ pickup

---

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### Step 1: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã

```
examples/auto_stack/
‚îî‚îÄ‚îÄ scripts/
    ‚îî‚îÄ‚îÄ 4_World/
        ‚îî‚îÄ‚îÄ Classes/
            ‚îî‚îÄ‚îÄ PlayerBase/
                ‚îî‚îÄ‚îÄ playerbase_autostack.c
```

### Step 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

–ü–æ–¥–Ω–∏–º–∏—Ç–µ –ª—é–±–æ–π –ø—Ä–µ–¥–º–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞—Ç—Ä–æ–Ω—ã) - –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—Å—è!

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
auto_stack/
‚îú‚îÄ‚îÄ README.md                        ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ scripts/
    ‚îî‚îÄ‚îÄ 4_World/
        ‚îî‚îÄ‚îÄ Classes/
            ‚îî‚îÄ‚îÄ PlayerBase/
                ‚îî‚îÄ‚îÄ playerbase_autostack.c  ‚Üê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ PlayerBase
```

---

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### playerbase_autostack.c

–ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç `OnInventoryEnter` –∏:
- –ò—â–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç quantity
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç cooldown

---

## üí° –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–∏—Ç—å cooldown:

**–í playerbase_autostack.c:**
```c
protected const float STACK_COOLDOWN = 1.0; // 1 —Å–µ–∫—É–Ω–¥–∞
```

### –û—Ç–∫–ª—é—á–∏—Ç—å cooldown:

**–í playerbase_autostack.c:**
```c
override void OnInventoryEnter(EntityAI item)
{
    super.OnInventoryEnter(item);

    // –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É cooldown
    AutoStackItems();

    // –û–±–Ω–æ–≤–ª—è–µ–º cooldown
    // m_LastStackTime = currentTime; // –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù–û
}
```

### –ò—Å–∫–ª—é—á–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã:

**–í playerbase_autostack.c:**
```c
bool ShouldStack(ItemBase item)
{
    // –ò—Å–∫–ª—é—á–∞–µ–º magazines
    if (item.IsInherited(Magazine))
        return false;

    // –ò—Å–∫–ª—é—á–∞–µ–º –æ—Ä—É–∂–∏–µ
    if (item.IsInherited(Weapon))
        return false;

    return true;
}
```

---

## ‚ö†Ô∏è –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å vanilla DayZ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –º–æ–¥–æ–≤
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ autostack –º–æ–¥–∞–º–∏

---

## üêõ Troubleshooting

### –ü—Ä–µ–¥–º–µ—Ç—ã –Ω–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–µ–¥–º–µ—Ç—ã –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–µ–¥–º–µ—Ç—ã stackable
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ script log

### –û–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ

1. –£–≤–µ–ª–∏—á—å—Ç–µ STACK_COOLDOWN
2. –ò—Å–∫–ª—é—á–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **CPU:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ
- **Memory:** ~1 KB per player
- **Network:** –ù–µ –≤–ª–∏—è–µ—Ç

---

## üöÄ –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

### Ideas:
1. **GUI toggle** - –≤–∫–ª/–≤—ã–∫–ª
2. **Priority** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–æ–≤
3. **Smart stacking** - —É–º–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ
4. **Blacklist** - blacklist –ø—Ä–µ–¥–º–µ—Ç–æ–≤

**–°–º–æ—Ç—Ä–∏—Ç–µ:** [reference/AUTO_STACK_MANAGEMENT.md](../../reference/AUTO_STACK_MANAGEMENT.md)

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-01-17*
*–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è*
